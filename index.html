<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>For Umera ‚ù§Ô∏è</title>

    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;800&family=Poppins:wght@300;400;600&display=swap"
        rel="stylesheet">

    <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- VARIABLES --- */
        :root {
            --primary: #ff4d6d;
            --secondary: #ff8fa3;
            --dark: #0f0518;
            --glass: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: var(--dark);
            color: var(--text);
            font-family: 'Poppins', sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
        }

        /* --- STARS BACKGROUND --- */
        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: -2;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            animation: twinkle var(--duration) ease-in-out infinite;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.2;
                transform: scale(0.8);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }

        /* --- ORBS --- */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.4;
            z-index: -1;
        }

        .orb.one {
            width: 400px;
            height: 400px;
            background: #5a189a;
            top: -10%;
            left: -10%;
        }

        .orb.two {
            width: 300px;
            height: 300px;
            background: #e01e37;
            bottom: -10%;
            right: -10%;
        }

        /* --- CARD --- */
        .card-container {
            width: 90%;
            max-width: 400px;
            transform-style: preserve-3d;
            transition: transform 0.1s ease-out;
        }

        .card {
            min-height: 550px;
            background: var(--glass);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 2rem;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        /* --- TYPOGRAPHY --- */
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(to right, #fff, #ffccd5);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        p {
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .typewriter-text {
            border-right: 2px solid var(--primary);
            animation: blink 0.75s step-end infinite;
        }

        @keyframes blink {
            50% {
                border-color: transparent;
            }
        }

        /* --- BUTTONS --- */
        button {
            background: linear-gradient(135deg, var(--primary), #d90429);
            border: none;
            padding: 16px 40px;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(255, 77, 109, 0.3);
            transition: all 0.3s ease;
            z-index: 2;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(255, 77, 109, 0.5);
        }

        /* --- MUSIC CONTROL --- */
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 100;
            animation: spin 4s linear infinite;
            animation-play-state: paused;
        }

        .music-control.playing {
            animation-play-state: running;
            box-shadow: 0 0 15px var(--primary);
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }

        /* --- STEPS --- */
        .step {
            display: none;
            width: 100%;
            height: 100%;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .step.active {
            display: flex;
        }

        .pulse-btn {
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0));
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.2rem;
            cursor: pointer;
            position: relative;
        }

        .pulse-btn::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.5);
            animation: ripple 2s infinite;
        }

        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(1.6);
                opacity: 0;
            }
        }

        /* --- UPDATED VIDEO SECTION --- */
        .video-wrapper {
            position: relative;
            width: 100%;
            /* Limit height and maintain aspect ratio */
            max-height: 60vh;
            aspect-ratio: 9/16;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 0;
            /* Remove bottom margin because button is inside */
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            transform: scale(0.95);
            opacity: 0;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Ensures video fills the box beautifully */
            display: block;
        }

        /* Button hidden on top of video */
        #overlayBtn {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0;
            pointer-events: none;
            /* Can't click until visible */
            transition: all 0.5s ease;
            background: rgba(255, 77, 109, 0.9);
            /* Slightly transparent background */
            backdrop-filter: blur(5px);
            white-space: nowrap;
        }

        /* Gallery */
        .gallery {
            display: flex;
            overflow-x: auto;
            gap: 15px;
            width: 100%;
            padding: 10px 5px;
            scroll-snap-type: x mandatory;
            scrollbar-width: none;
        }

        .gallery img {
            width: 180px;
            height: 260px;
            object-fit: cover;
            border-radius: 15px;
            scroll-snap-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>

<body>

    <div class="stars" id="starfield"></div>
    <div class="orb one"></div>
    <div class="orb two"></div>

    <div class="music-control" id="musicBtn" onclick="toggleMusic()">üéµ</div>
    <audio id="music" src="assets/song.mp3" loop></audio>

    <div class="card-container" id="cardContainer">
        <div class="card">

            <div class="step active" id="step0">
                <div class="pulse-btn" onclick="startExperience()">üí´</div>
                <p style="margin-top: 25px; letter-spacing: 2px; font-size: 0.8rem; text-transform: uppercase;">Tap to
                    Begin</p>
            </div>

            <div class="step" id="step1">
                <div style="font-size: 3.5rem; margin-bottom: 1.5rem;">‚ú®</div>
                <h1>It‚Äôs your day</h1>
                <p>The world got a little brighter today.</p>
                <button onclick="nextStep(2)">Continue ‚Üí</button>
            </div>

            <div class="step" id="step2">
                <h1 id="typewriter"></h1>
                <p>Wishing you the happiest moments.</p>
                <button onclick="nextStep(3)">Unwrap Gift ‚Üí</button>
            </div>

            <div class="step" id="step3">
                <h2>Will you join me the last time to celebrate your birthday? üéà</h2><br />
                <button onclick="celebrate()">YES ‚ù§Ô∏è</button>
            </div>

            <div class="step" id="step4">
                <div class="video-wrapper" id="videoWrapper">
                    <video id="cakeVideo" src="assets/cake.mp4" playsinline muted></video>
                    <button id="overlayBtn" onclick="nextStep(5)">One more thing ‚Üí</button>
                </div>
            </div>

            <div class="step" id="step5">
                <div class="gallery">
                    <img src="assets/girl.jpeg" alt="Memories">
                    <img src="assets/m2.jpeg" alt="Memories">
                    <img src="assets/m3.jpeg" alt="Memories">
                    <img src="assets/m4.jpeg" alt="Memories">
                    <img src="assets/m5.jpeg" alt="Memories">
                    <img src="assets/m6.jpeg" alt="Memories">
                    <img src="assets/m7.jpeg" alt="Memories">
                </div>
                <p style="margin-top: 1.5rem; font-size: 0.9rem; font-style: italic;">
                    "You have this rare and beautiful way of making everything around you feel lighter and calmer. Your
                    smile, your kindness, and the warmth you carry have always meant more than you probably realized.
                    Every moment spent with you felt special in its own simple way, and honestly, those memories will
                    always stay with me. I‚Äôve noticed the silence for a while now, and I understand.
                    I won‚Äôt ask or push anymore. From here on, it‚Äôs your choice ‚Äî do what feels right to you.
                    I‚Äôm stepping back completely from my side, with no expectations and no complaints.
                    I wish you well.
                    Happy Birthday, Kutti.
                    Allah Hafiz, Fi Amanillah.
                </p>
                <button onclick="nextStep(6)">Final Message ‚Üí</button>
            </div>

            <div class="step" id="step6">
                <h1 style="font-size: 4.5rem;">‚ù§Ô∏è</h1>
                <h2>Thank You</h2>
                <p>For being part of my life.</p>
                <p style="font-size: 0.8rem; opacity: 0.6; margin-top: 20px;">Lots of love, Ummu‚ù§Ô∏è</p>
            </div>

        </div>
    </div>

    <script>
        // --- Stars & Tilt Setup ---
        const starContainer = document.getElementById('starfield');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            const size = Math.random() * 3 + 'px';
            star.style.width = size; star.style.height = size;
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            starContainer.appendChild(star);
        }

        const cardContainer = document.getElementById('cardContainer');
        document.addEventListener('mousemove', (e) => {
            const xAxis = (window.innerWidth / 2 - e.pageX) / 25;
            const yAxis = (window.innerHeight / 2 - e.pageY) / 25;
            cardContainer.style.transform = `rotateY(${xAxis}deg) rotateX(${yAxis}deg)`;
        });
        document.addEventListener('mouseleave', () => {
            cardContainer.style.transform = `rotateY(0deg) rotateX(0deg)`;
        });

        // --- Logic ---
        let currentStep = 0;
        const music = document.getElementById('music');
        const musicBtn = document.getElementById('musicBtn');

        // Typewriter
        const textToType = "Happy Birthday Umera ‚ù§Ô∏è";
        const typeWriterElement = document.getElementById('typewriter');
        let typeIndex = 0;

        function typeWriter() {
            if (typeIndex < textToType.length) {
                typeWriterElement.innerHTML += textToType.charAt(typeIndex);
                typeIndex++;
                setTimeout(typeWriter, 100);
            } else {
                typeWriterElement.classList.remove('typewriter-text');
            }
        }

        function toggleMusic() {
            if (music.paused) { music.play(); musicBtn.classList.add('playing'); }
            else { music.pause(); musicBtn.classList.remove('playing'); }
        }

        function startExperience() {
            music.volume = 0; music.play(); musicBtn.classList.add('playing');
            let vol = 0;
            const fadeInterval = setInterval(() => {
                if (vol < 1) { vol += 0.05; music.volume = vol; }
                else { clearInterval(fadeInterval); }
            }, 200);
            nextStep(1);
        }

        function nextStep(stepNumber) {
            const currentEl = document.getElementById(`step${currentStep}`);

            gsap.to(currentEl, {
                opacity: 0, y: -20, scale: 0.95, duration: 0.5,
                onComplete: () => {
                    currentEl.classList.remove('active');
                    currentStep = stepNumber;
                    const nextEl = document.getElementById(`step${currentStep}`);
                    nextEl.classList.add('active');

                    if (stepNumber === 2) {
                        typeWriterElement.innerHTML = ""; typeIndex = 0;
                        typeWriterElement.classList.add('typewriter-text'); setTimeout(typeWriter, 500);
                    }

                    if (stepNumber === 4) {
                        const vid = document.getElementById('cakeVideo');
                        const wrapper = document.getElementById('videoWrapper');

                        // Reset Button
                        const btn = document.getElementById('overlayBtn');
                        gsap.set(btn, { opacity: 0, scale: 0.8, pointerEvents: "none" });

                        // Play Video
                        vid.currentTime = 0;
                        vid.play();

                        // Video End Listener
                        vid.onended = () => {
                            gsap.to(btn, {
                                opacity: 1, scale: 1, pointerEvents: "all", duration: 0.5, ease: "back.out(1.7)"
                            });
                        };

                        gsap.to(wrapper, { opacity: 1, scale: 1, duration: 0.8, ease: "back.out(1.7)" });
                    }

                    gsap.fromTo(nextEl,
                        { opacity: 0, y: 20, scale: 0.95 },
                        { opacity: 1, y: 0, scale: 1, duration: 0.5 }
                    );
                }
            });
        }

        function celebrate() {
            const duration = 3000; const end = Date.now() + duration;
            (function frame() {
                confetti({ particleCount: 10, angle: 60, spread: 55, origin: { x: 0 }, shapes: ['heart'], colors: ['#ff4d6d', '#ff8fa3', '#ffffff'] });
                confetti({ particleCount: 10, angle: 120, spread: 55, origin: { x: 1 }, shapes: ['heart'], colors: ['#ff4d6d', '#ff8fa3', '#ffffff'] });
                if (Date.now() < end) { requestAnimationFrame(frame); }
            }());
            setTimeout(() => { nextStep(4); }, 2000);
        }
    </script>
</body>


</html>


